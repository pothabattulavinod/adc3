name: Clear HLS / CMAF Output

on:
  workflow_dispatch:

jobs:
  clean:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ Checkout repository (optional, if needed)
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2Ô∏è‚É£ Remove output folder
      - name: Remove HLS/CMAF output
        run: |
          OUTPUT_FOLDER="og"
          if [ -d "$OUTPUT_FOLDER" ]; then
            echo "üßπ Removing existing HLS output folder: $OUTPUT_FOLDER"
            rm -rf "$OUTPUT_FOLDER"
          else
            echo "Nothing to clean. Folder does not exist."
          fi

      # 3Ô∏è‚É£ Clear temporary files (optional)
      - name: Clear temporary system cache
        run: |
          echo "üßπ Cleaning /tmp folder (runner temporary files)"
          sudo rm -rf /tmp/*
          df -h /tmp

      # 4Ô∏è‚É£ Optional: Confirm cleanup
      - name: Confirm cleanup
        run: |
          OUTPUT_FOLDER="og"
          if [ ! -d "$OUTPUT_FOLDER" ]; then
            echo "‚úÖ HLS output folder successfully cleared."
          else
            echo "‚ö†Ô∏è HLS output folder still exists."
          fi
